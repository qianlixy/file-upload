<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8">
    <title>index</title>
    <style>#canvas{background: #ccc;}</style>
  </head>
  <body>
    <input type="file" id="file">
    <input class="input" placeholder="imgx" id="imgx" value="0">
    <input class="input" placeholder="imgy" id="imgy" value="0">
    <input class="input" placeholder="imgw" id="imgw" value="300">
    <input class="input" placeholder="imgh" id="imgh" value="300">
    <input class="input" placeholder="canx" id="canx" value="0">
    <input class="input" placeholder="cany" id="cany" value="0">
    <input class="input" placeholder="canw" id="canw" value="300">
    <input class="input" placeholder="canh" id="canh" value="300"><br><br><a href="javascript:zoom(1);">放大 </a><a href="javascript:zoom(-1);">缩小 </a><br><br>
    <canvas id="canvas" width="300" height="300"></canvas>
    <script>
      var input = document.getElementById("file");
      input.onchange = function(event) {
        draw(this.files[0]);
      }
      var inputs = document.getElementsByClassName("input");
      for(var i in inputs) {
        inputs[i].onchange = function() {
          draw(input.files[0]);
        }
      }
      
      function draw(file) {
        var reader = new FileReader();
        var canvas = document.getElementById("canvas");
        var ctx = canvas.getContext('2d');
        reader.onload = function() {
          var img = document.createElement("img");
          img.src = this.result;
          img.onload = function() {
            ctx.fillStyle = "#000";
            ctx.fillRect(0, 0, 300, 300);
            ctx.drawImage(this, 
              document.getElementById("imgx").value,
              document.getElementById("imgy").value,
              document.getElementById("imgw").value,
              document.getElementById("imgh").value,
              document.getElementById("canx").value,
              document.getElementById("cany").value,
              document.getElementById("canw").value,
              document.getElementById("canh").value
              );
          }
        }
        reader.readAsDataURL(file);
      }
      
      function zoom(type) {
        var canvas = document.getElementById("canvas");
        var ctx = canvas.getContext('2d');
        var data = ctx.getImageData(0, 0, 300, 300);
        ctx.scale(2,2);
        ctx.putImageData(data, 0, 0)
      }
    </script>
  </body>
</html>